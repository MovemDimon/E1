<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Daimonium Token Airdrop â€” Final UI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* -------------------------
           Base / Variables
           ------------------------- */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Vazirmatn', sans-serif; }
        :root{
            --primary: #001F3F;
            --light: #f5f7ff;
            --glass-weak: rgba(255,255,255,0.03);
            --glass-weak-2: rgba(255,255,255,0.02);
            --glass-border: rgba(255,255,255,0.08);
            --nav-border-white: rgba(255,255,255,0.15);
            --nav-bg-opaque: rgba(0,0,0,0.62);
            --nav-bg-translucent: rgba(0,0,0,0.46);
            --shadow-strong: 0 12px 36px rgba(0,0,0,0.6);
            --green-pill: rgba(105,240,174,0.12);
            --red-pill: rgba(255,82,82,0.12);
            --blue-pill: rgba(33, 150, 243, 0.15);
        }

        /* -------------------------
           GESTURE & SELECTION BLOCKING
           ------------------------- */
        /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        html, body, * {
            -webkit-user-select: none !important;
            -moz-user-select: none !important;
            -ms-user-select: none !important;
            user-select: none !important;
        }

        /* Ø­Ø°Ù Ù‡Ø§ÛŒÙ„Ø§ÛŒØª Ø¢Ø¨ÛŒ Ù„Ù…Ø³ÛŒ */
        * {
            -webkit-tap-highlight-color: rgba(0,0,0,0) !important;
        }

        /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ø±Ú¯ */
        * {
            -webkit-user-drag: none !important;
            user-drag: none !important;
        }

        /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø²Ø±Ú¯â€ŒÙ†Ù…Ø§ÛŒÛŒ Ø¨Ø§ Ø¯Ø§Ø¨Ù„â€ŒØªÙ¾ */
        body {
            touch-action: manipulation !important;
        }

        /* Ù„Ø§ÛŒÙ‡Ù” Ù…Ø®ØµÙˆØµ Ø®Ù†Ø«ÛŒâ€ŒÚ©Ù†Ù†Ø¯Ù‡ long-press Ù…Ø±ÙˆØ±Ú¯Ø± */
        #gesture-blocker {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999999999;
            background: transparent;
            pointer-events: none; /* Ù…Ù‡Ù…! Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ ØªØ¯Ø§Ø®Ù„ÛŒ Ø¨Ø§ Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø§Ù¾ Ù†Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ */
            touch-action: none;
        }

        /* Ø§Ø¬Ø§Ø²Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø±Ø§ÛŒ Ø¹Ù†Ø§ØµØ± Ø¶Ø±ÙˆØ±ÛŒ */
        .temp-copy-area {
            user-select: text !important;
            -webkit-user-select: text !important;
        }

        /* Body + Background */
        body{
            min-height:100vh;
            background: #000000;
            color:var(--light);
            display:flex;
            justify-content:center;
            align-items:flex-start;
            padding:20px;
            overflow-x:hidden;
            position:relative;
        }

        /* Ø§Ù„Ù…Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…ØªØ­Ø±Ú© Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ */
        .diamonds {
            position: fixed;
            inset: 0;
            overflow: hidden;
            z-index: -3;
        }

        .diamond {
            position: absolute;
            width: 16px;
            height: 16px;
            background: rgba(0, 400, 275, 0.45);
            clip-path: polygon(
                80% 20%,   /* Ú¯ÙˆØ´Ù‡ Ø±Ø§Ø³Øª Ø¨Ø§Ù„Ø§ */
                100% 40%,  /* Ú¯ÙˆØ´Ù‡ Ø±Ø§Ø³Øª */
                50% 100%,  /* Ù†ÙˆÚ© Ù¾Ø§ÛŒÛŒÙ† */
                0% 40%,    /* Ú¯ÙˆØ´Ù‡ Ú†Ù¾ */
                20% 20%    /* Ú¯ÙˆØ´Ù‡ Ú†Ù¾ Ø¨Ø§Ù„Ø§ */
            );
            opacity: 0;
            filter: drop-shadow(0 0 3px rgba(0, 150, 255, 0.15));
            animation: float 12s ease-in-out infinite;
        }

        @keyframes float {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0.6);
            }
            10% {
                opacity: 0.28;
            }
            50% {
                opacity: 0.18;
                transform: translateY(-40px) scale(0.75);
            }
            90% {
                opacity: 0;
            }
            100% {
                transform: translateY(-60px) scale(0.6);
            }
        }

        /* -------------------------
           Container / Layout
           ------------------------- */
        .container{
            width:100%;
            max-width:560px;
            margin: 0 auto;
            padding: 0 12px 140px;
            position: relative;
            z-index: 1;
        }

        /* Loading screen - ÙÙ‚Ø· Ø§Ø³Ù¾ÛŒÙ†Ø± */
        .loading-screen{
            position:fixed; inset:0;
            display:flex; align-items:center; justify-content:center;
            z-index:9999;
            background: #000000;
            transition:opacity .4s ease, visibility .4s ease;
        }
        .loading-screen.hidden{ opacity:0; visibility:hidden; }

        .spinner{
            width:60px; height:60px; border-radius:50%;
            border:8px solid rgba(255,255,255,0.08); /* Ø¶Ø®ÛŒÙ…â€ŒØªØ± */
            border-left:8px solid #fff; /* Ø¶Ø®ÛŒÙ…â€ŒØªØ± */
            animation:spin 1.8s linear infinite; /* Ø³Ø±Ø¹Øª Ú©Ù…ØªØ± */
            margin-bottom:0; /* Ø­Ø°Ù margin */
        }
        @keyframes spin{ to { transform: rotate(360deg); } }

        /* -------------------------
           User Profile Pill - Ø¬Ø¯ÛŒØ¯
           ------------------------- */
        .user-pill {
            position: fixed;
            top: 5px; /* Ù†Ø²Ø¯ÛŒÚ© Ø¨Ù‡ Ø³Ù‚Ù */
            left: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 6px 14px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px) saturate(1.1);
            -webkit-backdrop-filter: blur(12px) saturate(1.1);
            border: 1px solid rgba(255, 255, 255, 0.08);
            z-index: 1000; /* Ø¨Ø§Ù„Ø§ Ø¨ÙˆØ¯Ù† Ø±ÙˆÛŒ Ù‡Ù…Ù‡ Ú†ÛŒØ² */
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            max-width: 280px;
            overflow: hidden;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
            overflow: hidden;
        }

        .user-name {
            font-size: 0.95rem;
            font-weight: 700;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 180px;
        }

        /* -------------------------
           Token display + price pills
           ------------------------- */
        .token-display{ 
            display:flex; 
            align-items:center; 
            justify-content:center; 
            margin:40px 0; /* Ø§ÙØ²Ø§ÛŒØ´ ÙØ§ØµÙ„Ù‡ */
            gap:12px; 
        }
        .token-amount{ font-size:3rem; font-weight:900; color:white; text-shadow:0 0 12px rgba(255,255,255,0.12); }
        .token-logo{ 
            width:58px; /* Ú©Ù…ÛŒ Ø¨Ø²Ø±Ú¯ØªØ± Ø§Ø² 51.2px Ùˆ Ú©ÙˆÚ†Ú©ØªØ± Ø§Ø² 64px */
            height:58px; /* Ú©Ù…ÛŒ Ø¨Ø²Ø±Ú¯ØªØ± Ø§Ø² 51.2px Ùˆ Ú©ÙˆÚ†Ú©ØªØ± Ø§Ø² 64px */
            border-radius:50%; 
            display:flex; align-items:center; justify-content:center; 
            overflow:hidden; 
            background: none; /* Ø­Ø°Ù Ø¯Ø§ÛŒØ±Ù‡ Ø¢Ø¨ÛŒ */
            box-shadow: none; /* Ø­Ø°Ù Ø³Ø§ÛŒÙ‡ */
        }
        .token-logo img{ width:100%; height:100%; object-fit:contain; }

        /* Price Pills */
        .price-pills{
            display:flex;
            justify-content:center;
            gap:12px;
            margin:35px 0 45px; /* Ø§ÙØ²Ø§ÛŒØ´ ÙØ§ØµÙ„Ù‡ */
            animation:fadeInUp .6s ease;
        }

        .price-pill{
            display:inline-flex;
            align-items:center;
            justify-content:center;
            gap:8px;
            padding:8px 16px;
            border-radius:999px;
            font-size:0.78rem;
            line-height:1;
            min-height:36px;
            box-sizing:border-box;
            backdrop-filter: blur(8px) saturate(1.1);
            -webkit-backdrop-filter: blur(8px) saturate(1.1);
            border: 1px solid rgba(255,255,255,0.10);
            cursor:default;
            min-width: 90px;
            position: relative;
        }

        .price-pill.min{
            background: var(--red-pill);
            color: #ff5252;
        }

        .price-pill.max{
            background: var(--green-pill);
            color: #69f0ae;
        }

        .price-pill.center{
            background: rgba(255,255,255,0.05);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ÙˆÛŒØ¨Ø±Ù‡ Ø¨Ø±Ø§ÛŒ Ø¹Ù„Ø§Ù…Øª Ø³ÙˆØ§Ù„ Ø¯Ø§Ø®Ù„ Ú©Ù¾Ø³ÙˆÙ„ */
        .question-shake {
            display: inline-block;
            animation: questionVibrate 4s ease-in-out infinite;
        }

        @keyframes questionVibrate {
            0%, 75%, 100% {
                transform: translateX(0);
            }
            77.5% {
                transform: translateX(2px);
            }
            80% {
                transform: translateX(-2px);
            }
            82.5% {
                transform: translateX(1px);
            }
            85% {
                transform: translateX(-1px);
            }
            87.5% {
                transform: translateX(0.5px);
            }
            90% {
                transform: translateX(-0.5px);
            }
            92.5% {
                transform: translateX(0);
            }
        }

        .price-pill.center:hover {
            transform: scale(1.05);
        }

        .price-label{ font-size:.78rem; margin-bottom:0; font-weight:500; }
        .price-value{ font-size:0.85rem; font-weight:700; }

        /* -------------------------
           Card system
           ------------------------- */
        .card{
            width:100%;
            margin: 80px 0; /* ÙØ§ØµÙ„Ù‡ 2 Ø¨Ø±Ø§Ø¨Ø± Ø´Ø¯Ù‡ */
            border-radius:18px;
            padding:20px;
            transition:all .35s ease;
            animation:fadeInUp .6s ease;
        }

        /* MINI cards - 100% Ø´ÙØ§ÙØŒ Ø¨Ø¯ÙˆÙ† Ø­Ø§Ø´ÛŒÙ‡ØŒ Ù…Ø´Ú©ÛŒ Ù†ÛŒÙ…Ù‡ Ø´ÙØ§Ù */
        .card.mini{
            background: rgba(5, 5, 8, 0.8); /* Ù…Ø´Ú©ÛŒ Ù†ÛŒÙ…Ù‡ Ø´ÙØ§Ù - 10% Ø¨Ø§ Ù…Ø´Ú©ÛŒ Ù…Ø·Ù„Ù‚ Ø±ÙˆØ´Ù†â€ŒØªØ± */
            border: none; /* Ø­Ø°Ù Ú©Ø§Ù…Ù„ Ø­Ø§Ø´ÛŒÙ‡ */
            backdrop-filter: blur(3px); /* Ú©Ø§Ù‡Ø´ blur Ø¨Ø±Ø§ÛŒ Ø´ÙØ§ÙÛŒØª Ø¨ÛŒØ´ØªØ± */
            box-shadow: none; /* Ø­Ø°Ù Ø³Ø§ÛŒÙ‡ */
        }

        .card-title{ 
            font-size:1.25rem; 
            font-weight:700; 
            color:white; 
            text-align:center; 
            margin-bottom:14px;
            display: flex;
            align-items: center;
            justify-content: space-between; /* ØªØºÛŒÛŒØ± Ø¨Ù‡ space-between */
        }

        /* task rows */
        .task{ display:flex; justify-content:space-between; align-items:center; padding:12px 0; border-bottom:1px solid rgba(255,255,255,0.03); }
        .task:last-child{ border-bottom:none; }
        .task-detail{ display:flex; gap:12px; align-items:center; }
        .task-image{ width:52px; height:52px; border-radius:12px; overflow:hidden; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.18); }
        .task-image img{ width:70%; height:70%; object-fit:contain; }
        .task-info h4{ font-size:1rem; color:var(--light); margin-bottom:6px; text-transform:capitalize; }
        .task-data{ display:flex; align-items:center; gap:8px; }
        .task-data h5{ color:white; font-weight:700; font-size:.95rem; }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ù¾Ø³ÙˆÙ„ÛŒ Ø¨Ø§ Ø§Ø³Ù¾ÛŒÙ†Ø± Ø¯Ø§Ø®Ù„ÛŒ */
        .task-button{
            padding:10px 20px; 
            border-radius:25px; /* Ú¯ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„Ø§Ù‹ Ú¯Ø±Ø¯ */
            background:#fff; 
            color:#000; 
            border:none; 
            font-weight:600; 
            cursor:pointer;
            font-size: 0.9rem;
            min-width: 80px;
            white-space: nowrap;
            position: relative;
            overflow: hidden;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÙÛŒØ¯ */
        .task-button:active,
        .invite-button:active,
        .buy-btn:active {
            transform: scale(0.92);
        }

        .task-button.loading {
            color: transparent;
            pointer-events: none;
        }

        .task-button.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 4px solid #000; /* Ø¶Ø®ÛŒÙ…â€ŒØªØ± */
            border-radius: 50%;
            border-top-color: transparent;
            animation: button-spin 0.8s linear infinite;
        }

        @keyframes button-spin {
            to { transform: rotate(360deg); }
        }

        /* Invite / purchase buttons */
        .invite-button{ 
            width:100%; 
            padding:14px; 
            border-radius:25px; /* Ú¯ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„Ø§Ù‹ Ú¯Ø±Ø¯ */
            background:#fff; 
            color:#000; 
            border:none; 
            font-weight:700; 
            cursor:pointer; 
            font-size: 1rem;
            position: relative;
            overflow: hidden;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px; /* ÙØ§ØµÙ„Ù‡ Ø¨Ø§ Ú©Ù¾Ø³ÙˆÙ„ Ø¨Ø§Ù„Ø§ÛŒÛŒ */
        }

        .invite-button.loading {
            color: transparent;
            pointer-events: none;
        }

        .invite-button.loading::after {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            border: 4px solid #000; /* Ø¶Ø®ÛŒÙ…â€ŒØªØ± */
            border-radius: 50%;
            border-top-color: transparent;
            animation: button-spin 0.8s linear infinite;
        }

        /* Invite Stats Pill - Ú©Ù¾Ø³ÙˆÙ„ Ø¢Ø¨ÛŒ */
        .invite-pill {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 999px;
            font-size: 0.85rem;
            line-height: 1;
            min-height: 36px;
            box-sizing: border-box;
            backdrop-filter: blur(8px) saturate(1.1);
            -webkit-backdrop-filter: blur(8px) saturate(1.1);
            border: 1px solid rgba(33, 150, 243, 0.3);
            background: var(--blue-pill);
            color: #4FC3F7;
            font-weight: 700;
        }

        .invite-pill i {
            font-size: 0.9rem;
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ USDT Ù‡Ù… Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ claim */
        .buy-btn {
            padding: 10px 20px !important;
            border-radius: 25px !important;
            background: #fff;
            color: #000;
            border: none;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.9rem;
            white-space: nowrap;
            min-width: auto; /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù…ØªÙ† */
            position: relative;
            overflow: hidden;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .buy-btn.loading {
            color: #000 !important; /* Ù…ØªÙ† Ø³ÛŒØ§Ù‡ Ø¨Ø§Ù‚ÛŒ Ø¨Ù…Ø§Ù†Ø¯ */
            pointer-events: none;
            background-color: #e0e0e0; /* Ø±Ù†Ú¯ Ú©Ù…ÛŒ Ø®Ø§Ú©Ø³ØªØ±ÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ø§Ù„Øª Ù„ÙˆØ¯ÛŒÙ†Ú¯ */
        }

        /* Ø­Ø°Ù Ø§Ø³Ù¾ÛŒÙ†Ø± Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯ */
        .buy-btn.loading::after {
            display: none; /* Ø§Ø³Ù¾ÛŒÙ†Ø± Ø±Ø§ Ø­Ø°Ù Ú©Ù† */
        }

        .invite-stats{ text-align:center; margin-bottom:12px; color:white; font-size:1rem; }

        /* Wallet small card - Ø¨Ø²Ø±Ú¯ Ú©Ø±Ø¯Ù† wallet.gif */
        .wallet-card{ margin-bottom:28px; }
        .wallet-card .task-image {
            width: 104px; /* 2 Ø¨Ø±Ø§Ø¨Ø± Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
            height: 104px; /* 2 Ø¨Ø±Ø§Ø¨Ø± Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
            border-radius: 20px; /* Ø§ÙØ²Ø§ÛŒØ´ radius Ø¨Ø±Ø§ÛŒ Ø¸Ø§Ù‡Ø± Ù†Ø±Ù…â€ŒØªØ± */
        }

        /* -------------------------
           Announcements Card - Ù…Ø´Ú©ÛŒ
           ------------------------- */
        .announcements-card {
            background: rgba(5, 5, 8, 0.9) !important; /* Ù…Ø´Ú©ÛŒ Ù…Ø«Ù„ Ø¨Ù‚ÛŒÙ‡ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
            border: none !important;
            margin-top: 40px !important;
            margin-bottom: 40px !important;
        }

        .announcements-card .card-title {
            color: #FF6B35 !important; /* Ø±Ù†Ú¯ Ø¹Ù†ÙˆØ§Ù† Ø«Ø§Ø¨Øª */
        }

        .announcements-content {
            color: #FF6B35;
            font-size: 14px;
            line-height: 1.6;
            margin-top: 10px;
        }

        .announcements-content strong {
            color: #FF8C5A;
        }

        .announcements-content em {
            font-style: italic;
            color: #FFA07A;
        }

        /* -------------------------
           Bottom Navigation (fixed)
           ------------------------- */
        .bottom-nav{
            position:fixed;
            bottom:20px;
            left:50%;
            transform:translateX(-50%);
            width: min(520px, calc(100% - 28px));
            max-width:520px;
            padding:8px 12px;
            border-radius:32px; /* Ú©Ù¾Ø³ÙˆÙ„ÛŒ Ú©Ø§Ù…Ù„ - Ø§ÙØ²Ø§ÛŒØ´ radius */
            display:flex;
            justify-content:space-between;
            gap:6px;
            align-items:center;
            z-index:120;
            transition: all .25s ease, background .25s ease, box-shadow .25s ease;
            box-shadow: var(--shadow-strong);
            background: linear-gradient(90deg, 
                rgba(80, 80, 80, 0.2) 0%, 
                rgba(0, 0, 0, 0.62) 40%,
                rgba(0, 0, 0, 0.62) 100%); /* Ú¯Ø±Ø§Ø¯ÛŒØ§Ù† Ø®Ø§Ú©Ø³ØªØ±ÛŒ Ø§Ø² Ú†Ù¾ */
            border: 1px solid var(--nav-border-white);
            backdrop-filter: blur(10px);
        }

        /* nav items */
        .nav-item{
            display:flex; 
            flex-direction:column; 
            align-items:center; 
            justify-content:center;
            gap:4px;
            flex:1 1 0; 
            min-width:56px;
            padding:6px 8px;
            border-radius:20px; /* Ú©Ù¾Ø³ÙˆÙ„ÛŒ Ø´Ú©Ù„ */
            cursor:pointer;
            transition: all .18s ease;
            opacity: 0.6; /* Ø­Ø§Ù„Øª Ú©Ù…â€ŒÙ†ÙˆØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ */
            position: relative;
        }
        .nav-item .nav-icon{ 
            font-size:1.1rem;
            color:rgba(255,255,255,0.7); 
            transition: all .18s ease; 
            z-index: 2;
        }
        .nav-item .nav-label{ 
            font-size:.65rem;
            color:rgba(207, 216, 227, 0.7); 
            transition: all .18s ease;
            display: block !important;
            z-index: 2;
        }

        /* Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ú©Ù¾Ø³ÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø®Ø´ ÙØ¹Ø§Ù„ */
        .nav-item.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px; /* Ú©Ù¾Ø³ÙˆÙ„ÛŒ Ø´Ú©Ù„ */
            z-index: 1;
            animation: activePulse 2s infinite;
        }

        @keyframes activePulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .nav-item.active{ 
            opacity: 1;
        }
        .nav-item.active .nav-icon{ 
            color: #fff; 
            transform: scale(1.05);
        }
        .nav-item.active .nav-label{ 
            color: #fff; 
            font-weight: 600;
        }

        /* Ø­Ø§Ù„Øª overlay Ù‡Ù†Ú¯Ø§Ù… Ø§Ø³Ú©Ø±ÙˆÙ„ */
        .bottom-nav.overlay{
            background: linear-gradient(90deg, 
                rgba(80, 80, 80, 0.15) 0%, 
                rgba(0, 0, 0, 0.46) 40%,
                rgba(0, 0, 0, 0.46) 100%);
            backdrop-filter: blur(18px);
        }

        /* -------------------------
           Modal Floating Card
           ------------------------- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3); /* Ø´ÙØ§Ùâ€ŒØªØ± */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            backdrop-filter: blur(2px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-card {
            background: rgba(10, 10, 15, 0.95);
            border-radius: 24px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal-overlay.active .modal-card {
            transform: scale(1);
            opacity: 1;
        }

        .modal-close {
            position: sticky;
            top: 10px;
            float: right;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            margin-bottom: 10px;
            z-index: 10001;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .modal-content {
            color: white; /* Ù…ØªÙ† Ø³ÙÛŒØ¯ */
            line-height: 1.6;
            clear: both;
            padding-top: 10px;
        }

        .modal-content h2 {
            color: white; /* Ø¹Ù†ÙˆØ§Ù† Ø³ÙÛŒØ¯ */
            margin-bottom: 20px;
            font-size: 1.8rem;
            text-align: center;
        }

        .modal-content p {
            margin-bottom: 15px;
            font-size: 0.95rem;
            color: white; /* Ù…ØªÙ† Ø³ÙÛŒØ¯ */
        }

        .modal-content strong {
            color: white; /* strong Ø³ÙÛŒØ¯ */
        }

        .modal-content .red-value {
            color: #ff5252 !important;
            font-weight: 700;
        }

        .modal-content .green-value {
            color: #69f0ae !important;
            font-weight: 700;
        }

        /* -------------------------
           Bottom Gradient Overlay
           ------------------------- */
        .bottom-gradient {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(to top, 
                rgba(0, 0, 0, 0.9) 0%, 
                rgba(0, 0, 0, 0.6) 50%,
                rgba(0, 0, 0, 0) 100%);
            pointer-events: none;
            z-index: 50;
        }

        /* -------------------------
           Notification Box - Ø¬Ø¯ÛŒØ¯
           ------------------------- */
        .notif-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #0d1117;
            color: #fff;
            padding: 14px 22px;
            border-radius: 10px;
            font-size: 14px;
            box-shadow: 0 8px 30px rgba(0, 123, 255, 0.5);
            max-width: 90%;
            text-align: center;
            line-height: 1.5;
            opacity: 0;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.3s ease;
            border-left: 6px solid #4caf50;
        }

        .notif-box.warning { border-left-color: #ff9800; }
        .notif-box.error   { border-left-color: #f44336; }

        .notif-box.show {
            opacity: 1;
            pointer-events: auto;
            animation: fadeInTop 0.6s ease forwards;
        }

        .notif-box.hide {
            animation: fadeOutTop 0.5s ease forwards;
        }

        @keyframes fadeInTop {
            from { opacity: 0; transform: translate(-50%, -30px); }
            to   { opacity: 1; transform: translate(-50%, 0); }
        }

        @keyframes fadeOutTop { 
            from { opacity: 1; transform: translate(-50%, 0); }
            to   { opacity: 0; transform: translate(-50%, -30px); }
        }

        /* -------------------------
           Utility / Responsive
           ------------------------- */
        @media (max-width:520px){
            .container{ padding:0 12px 120px; max-width: 520px; }
            .token-amount{ font-size:2.5rem; }
            .price-pill{ min-width: 80px; padding: 6px 12px; }
            .price-pills{ gap:10px; }
            .bottom-nav{ 
                width: calc(100% - 22px); 
                padding:6px 10px;
                border-radius: 28px;
            }
            .nav-item .nav-label{ display:block !important; font-size:.6rem; }
            .card { margin: 30px 0; }
            .task-button, .buy-btn { 
                padding: 8px 16px !important; 
                font-size: 0.85rem; 
            }
            .modal-card {
                width: 95%;
                padding: 20px;
            }
            .modal-content h2 {
                font-size: 1.5rem;
            }
            .task-button.loading::after,
            .buy-btn.loading::after {
                width: 16px;
                height: 16px;
                border-width: 3px;
            }
            .invite-button.loading::after {
                width: 20px;
                height: 20px;
                border-width: 3px;
            }
            .invite-pill {
                font-size: 0.75rem;
                padding: 6px 12px;
            }
            .card-title {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            .user-pill {
                max-width: 220px;
                padding: 5px 12px;
                top: 3px;
                left: 3px;
            }
            .user-avatar {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            .user-name {
                font-size: 0.85rem;
                max-width: 150px;
            }
            .wallet-card .task-image {
                width: 90px;
                height: 90px;
            }
        }

        @media (max-width:380px){
            .container{ padding:0 8px 110px; }
            .nav-item .nav-label{ display:block !important; font-size:.55rem; }
            .nav-item .nav-icon{ font-size:1rem; }
            .price-pill{ min-width: 70px; padding: 5px 10px; font-size: 0.72rem; }
            .task-button, .buy-btn { 
                padding: 8px 14px !important; 
                font-size: 0.8rem; 
            }
            .modal-card {
                padding: 15px;
            }
            .user-pill {
                max-width: 180px;
                padding: 4px 10px;
                top: 2px;
                left: 2px;
            }
            .user-avatar {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }
            .user-name {
                font-size: 0.75rem;
                max-width: 130px;
            }
            .wallet-card .task-image {
                width: 80px;
                height: 80px;
            }
        }

        /* animations */
        @keyframes fadeInUp{
            from{ opacity:0; transform:translateY(18px);}
            to{ opacity:1; transform:translateY(0);}
        }
    </style>
</head>
<body>

    <!-- Ø§Ù„Ù…Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…ØªØ­Ø±Ú© Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ -->
    <div class="diamonds" id="diamonds"></div>

    <!-- Ù„Ø§ÛŒÙ‡ Ø¨Ù„Ø§Ú© Ú©Ù†Ù†Ø¯Ù‡ gesture Ù‡Ø§ -->
    <div id="gesture-blocker"></div>

    <!-- Loading screen - ÙÙ‚Ø· Ø§Ø³Ù¾ÛŒÙ†Ø± -->
    <div class="loading-screen" id="loadingScreen">
        <div class="spinner"></div>
    </div>

    <!-- Ú¯Ø±Ø§Ø¯ÛŒØ§Ù† Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ -->
    <div class="bottom-gradient"></div>

    <!-- Modal Floating Card -->
    <div class="modal-overlay" id="infoModal">
        <div class="modal-card">
            <button class="modal-close" id="closeModal">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-content">
                <h2>Welcome to Daimonium</h2>

                <p><strong>Daimonium</strong> is a next-generation Telegram airdrop project â€” similar in structure to Notcoin â€” where users earn tokens through simple tasks and later exchange them after listing.</p>

                <p>However, Daimonium introduces something completely new: <strong>the ability to pre-purchase tokens before listing</strong> using small amounts of USDT. This means you can invest early and potentially gain much more when the token goes live on a real exchange.</p>

                <p>Our token distribution system is uniquely designed: only around <strong>2â€“5% of users are expected to purchase token packages</strong>. This gives buyers a major advantage compared to the 95% who only use the free route. Free users still earn tokens through daily tasks and referrals, but in smaller amounts.</p>

                <p>In your <strong>Home</strong> page, below your token balance, you'll see a <strong>USD estimation</strong> of your holdings. This is based on realistic projections and current distribution trends. The <span class="red-value">red value</span> represents the lowest-case estimate, and the <span class="green-value">green value</span> shows a normal/good projection.</p>

                <p>When you click to buy a token package, you'll be redirected to the <strong>Daimonium Telegram bot chat</strong>. There, the full step-by-step purchase process and payment instructions will be provided. You'll send USDT and submit your transaction hash for verification.</p>

                <p>ğŸš« No promises of guaranteed profit â€” all token values are speculative until listing.<br>
                âœ… Full transparency and risk notice is provided during the process.</p>

                <p>Join us early, be part of a growing community, and access a unique opportunity in the Telegram crypto ecosystem. Your participation is voluntary and secure.</p>

                <p>ğŸ“¢ For updates and info, check our official Telegram channel.<br>
                ğŸ’¬ For support, reach out to our team directly in the bot.</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- User Profile Pill - Ø¬Ø¯ÛŒØ¯ -->
        <div class="user-pill" id="userPill">
            <div class="user-avatar" id="userAvatar">
                <!-- Avatar will be inserted by JavaScript -->
            </div>
            <div class="user-info">
                <div class="user-name" id="userName">Loading...</div>
            </div>
        </div>

        <!-- Header: token display -->
        <div class="token-display" id="headerSection">
            <div class="token-amount" id="coinCount">0</div>
            <div class="token-logo">
                <img src="/material/images/logo.png" alt="Daimonium Logo">
            </div>
        </div>

        <!-- Price Pills -->
        <div class="price-pills" aria-hidden="false">
            <div class="price-pill min">
                <div class="price-label">MIN</div>
                <div class="price-value" id="minUsd">$0.0012</div>
            </div>

            <div class="price-pill center" id="infoButton">
                <i class="fas fa-question question-shake" style="font-size:1.1rem;"></i>
            </div>

            <div class="price-pill max">
                <div class="price-label">MAX</div>
                <div class="price-value" id="maxUsd">$0.0034</div>
            </div>
        </div>

        <!-- Daily Tasks -->
        <div class="card mini" id="tasksSection">
            <div class="card-title">Daily Tasks</div>

            <div class="task">
                <div class="task-detail">
                    <div class="task-image"><img src="/material/images/Daily 1.png" alt="Task Icon"></div>
                    <div class="task-info">
                        <h4>Daily Reward 1</h4>
                        <div class="task-data"><img src="/material/images/logo.png" alt="Coin Icon" style="width:20px;height:15px;"><h5>100</h5></div>
                    </div>
                </div>
                <button class="task-button" onclick="completeTask('task1', 100, 'reword.html', 'task1_done')">claim</button>
            </div>

            <div class="task">
                <div class="task-detail">
                    <div class="task-image"><img src="/material/images/Daily 2.png" alt="Task Icon"></div>
                    <div class="task-info">
                        <h4>Daily Reward 2</h4>
                        <div class="task-data"><img src="/material/images/logo.png" alt="Coin Icon" style="width:20px;height:15px;"><h5>100</h5></div>
                    </div>
                </div>
                <button class="task-button" onclick="completeTask('task2', 100, 'verify.html', 'task2_done')">claim</button>
            </div>
        </div>

        <!-- Invite Friends -->
        <div class="card mini" id="inviteSection">
            <div class="card-title">
                <span>Invite Friends</span>
                <div class="invite-pill" id="invitePill">
                    <i class="fas fa-user-friends"></i>
                    <span id="invitedCount">0</span>
                </div>
            </div>

            <button class="invite-button" id="inviteButton"><i class="fas fa-user-friends"></i> Invite Friends</button>

            <div style="margin-top: 20px; margin-bottom: 10px;"></div> <!-- ÙØ§ØµÙ„Ù‡ Ø¨ÛŒÙ† Ø¯Ú©Ù…Ù‡ Ùˆ ØªØ³Ú©â€ŒÙ‡Ø§ -->

            <div class="task">
                <div class="task-detail">
                    <div class="task-image"><img src="/material/images/Invite 3.png" alt="Invite Icon"></div>
                    <div class="task-info">
                        <h4>Invite 3 friends</h4>
                        <div class="task-data"><img src="/material/images/logo.png" alt="Coin Icon" style="width:20px;height:15px;"><h5>5,000</h5></div>
                    </div>
                </div>
                <button class="task-button" id="claimInvite3" onclick="completeInviteTask('invite3')">claim</button>
            </div>

            <div class="task">
                <div class="task-detail">
                    <div class="task-image"><img src="/material/images/Invite 5.png" alt="Invite Icon"></div>
                    <div class="task-info">
                        <h4>Invite 5 friends</h4>
                        <div class="task-data"><img src="/material/images/logo.png" alt="Coin Icon" style="width:20px;height:15px;"><h5>10,000</h5></div>
                    </div>
                </div>
                <button class="task-button" id="claimInvite5" onclick="completeInviteTask('invite5')">claim</button>
            </div>

            <div class="task">
                <div class="task-detail">
                    <div class="task-image"><img src="/material/images/Invite 10.png" alt="Invite Icon"></div>
                    <div class="task-info">
                        <h4>Invite 10 friends</h4>
                        <div class="task-data"><img src="/material/images/logo.png" alt="Coin Icon" style="width:20px;height:15px;"><h5>30,000</h5></div>
                    </div>
                </div>
                <button class="task-button" id="claimInvite10" onclick="completeInviteTask('invite10')">claim</button>
            </div>

            <div class="task">
                <div class="task-detail">
                    <div class="task-image"><img src="/material/images/Invite 20.png" alt="Invite Icon"></div>
                    <div class="task-info">
                        <h4>Invite 20 friends</h4>
                        <div class="task-data"><img src="/material/images/logo.png" alt="Coin Icon" style="width:20px;height:15px;"><h5>100,000</h5></div>
                    </div>
                </div>
                <button class="task-button" id="claimInvite20" onclick="completeInviteTask('invite20')">claim</button>
            </div>
        </div>

        <!-- Shopping / Purchase -->
        <div class="card mini" id="purchaseSection">
            <div class="card-title">Shopping Packages</div>

            <div class="package-row task" style="border-bottom:1px solid rgba(255,255,255,0.03);">
                <div class="package-info" style="display:flex;align-items:center;gap:10px;">
                    <img src="/material/images/logo.png" alt="Logo" style="width:33px;height:25px;">
                    <span style="font-weight:700;color:white">10,000</span>
                </div>
                <button class="buy-btn" onclick="handlePayment(10000, 1, this)">1 USDT</button>
            </div>

            <div class="package-row task">
                <div class="package-info" style="display:flex;align-items:center;gap:10px;">
                    <img src="/material/images/logo.png" alt="Logo" style="width:33px;height:25px;">
                    <span style="font-weight:700;color:white">80,000</span>
                </div>
                <button class="buy-btn" onclick="handlePayment(80000, 5, this)">5 USDT</button>
            </div>

            <div class="package-row task">
                <div class="package-info" style="display:flex;align-items:center;gap:10px;">
                    <img src="/material/images/logo.png" alt="Logo" style="width:33px;height:25px;">
                    <span style="font-weight:700;color:white">200,000</span>
                </div>
                <button class="buy-btn" onclick="handlePayment(200000, 10, this)">10 USDT</button>
            </div>

            <div class="package-row task">
                <div class="package-info" style="display:flex;align-items:center;gap:10px;">
                    <img src="/material/images/logo.png" alt="Logo" style="width:33px;height:25px;">
                    <span style="font-weight:700;color:white">1,000,000</span>
                </div>
                <button class="buy-btn" onclick="handlePayment(1000000, 50, this)">50 USDT</button>
            </div>

            <div class="package-row task">
                <div class="package-info" style="display:flex;align-items:center;gap:10px;">
                    <img src="/material/images/logo.png" alt="Logo" style="width:33px;height:25px;">
                    <span style="font-weight:700;color:white">3,000,000</span>
                </div>
                <button class="buy-btn" onclick="handlePayment(3000000, 100, this)">100 USDT</button>
            </div>

            <div class="payment-footer" style="margin-top:12px;color:#a0aec0">Payment with various digital currencies</div>
        </div>

        <!-- Wallet card -->
        <div class="card mini wallet-card" id="walletSection">
            <div class="task">
                <div class="task-detail">
                    <div class="task-image"><img src="/material/images/wallet.gif" alt="TON Icon"></div>
                    <div class="task-info">
                        <h4>Link your wallet</h4>
                        <div class="task-data"><img src="/material/images/ton.png" alt="Coin Icon" style="width:23px;height:23px;"><h5>TON</h5></div>
                    </div>
                </div>
                <button id="connectBtn" class="task-button">CONNECT</button>
            </div>
        </div>

        <!-- Announcements Card -->
        <div class="card mini announcements-card" id="announcementsSection">
            <div class="card-title">Announcements</div>
            <div class="announcements-content">
                <h4>Community Channels Coming Soon</h4>
                <p style="font-size:14px; color:#FF6B35; margin-top:5px; line-height:1.4;">
                    Daimonium has not yet opened its official community channels.<br>
                    Our communication platforms will become available once our family grows beyond 
                    <strong>5 million members</strong>, ensuring that no one misses out on our most important announcements.<br>
                    <em>Stay tuned â€” something truly remarkable is on the way.</em>
                </p>
            </div>
        </div>

    </div><!-- /container -->

    <!-- Bottom Navigation -->
    <div class="bottom-nav" id="bottomNav" role="navigation" aria-label="Main navigation">
        <div class="nav-item active" data-target="headerSection">
            <i class="fas fa-home nav-icon"></i>
            <div class="nav-label">Home</div>
        </div>

        <div class="nav-item" data-target="inviteSection">
            <i class="fas fa-user-friends nav-icon"></i>
            <div class="nav-label">Invite</div>
        </div>

        <div class="nav-item" data-target="purchaseSection">
            <i class="fas fa-shopping-cart nav-icon"></i>
            <div class="nav-label">Shop</div>
        </div>

        <div class="nav-item" data-target="walletSection">
            <i class="fas fa-wallet nav-icon"></i>
            <div class="nav-label">Wallet</div>
        </div>
    </div>

    <script>
        // ==============================
        // USER PROFILE SYSTEM - ÙÙ‚Ø· Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ù‚Ø¹ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
        // ==============================
        
        function isTelegramEnvironment() {
            return typeof Telegram !== 'undefined' && 
                   Telegram.WebApp && 
                   Telegram.WebApp.initData;
        }
        
        function getTelegramUser() {
            if (!isTelegramEnvironment()) {
                return null;
            }
            
            Telegram.WebApp.ready();
            return Telegram.WebApp.initDataUnsafe?.user || null;
        }
        
        function formatTelegramUserName(user) {
            // Ù…Ù†Ø·Ù‚ UX ØªÙ„Ú¯Ø±Ø§Ù…: first_name + last_name (Ø¨Ø§ trim)
            let displayName = '';
            
            if (user.first_name) {
                displayName = user.first_name;
                if (user.last_name) {
                    displayName += ' ' + user.last_name;
                }
            } else if (user.username) {
                displayName = user.username;
            } else {
                displayName = 'Telegram User';
            }
            
            return displayName.trim();
        }
        
        function setupUserProfile() {
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userPill = document.getElementById('userPill');
            
            // ÙÙ‚Ø· Ø¯Ø± Ù…Ø­ÛŒØ· ØªÙ„Ú¯Ø±Ø§Ù… ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
            if (!isTelegramEnvironment()) {
                // Ø¯Ø± Ù…Ø­ÛŒØ· ØºÛŒØ±ØªÙ„Ú¯Ø±Ø§Ù…ØŒ Ú©Ù¾Ø³ÙˆÙ„ Ø±Ø§ Ù…Ø®ÙÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                userPill.style.display = 'none';
                console.log('Not in Telegram environment, hiding user pill');
                return;
            }
            
            console.log('Telegram environment detected, waiting for user data...');
            
            // ØªÙ„Ú¯Ø±Ø§Ù… ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ØŒ Ù…Ù†ØªØ¸Ø± Ù…ÛŒâ€ŒÙ…Ø§Ù†ÛŒÙ… Ùˆ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
            let attempts = 0;
            const maxAttempts = 5;
            
            function tryLoadUser() {
                attempts++;
                const user = getTelegramUser();
                
                if (user && user.id) {
                    console.log('User data loaded after', attempts, 'attempts:', user);
                    
                    const displayName = formatTelegramUserName(user);
                    userName.textContent = displayName;
                    
                    // ØªÙ†Ø¸ÛŒÙ… Ø¢ÙˆØ§ØªØ§Ø±
                    if (user.photo_url) {
                        const img = document.createElement('img');
                        img.src = user.photo_url;
                        img.alt = 'User Avatar';
                        img.onload = function() {
                            console.log('User avatar loaded successfully');
                        };
                        img.onerror = function() {
                            console.log('Failed to load avatar, using initials');
                            userAvatar.textContent = displayName.charAt(0).toUpperCase();
                            userAvatar.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                        };
                        userAvatar.innerHTML = '';
                        userAvatar.appendChild(img);
                    } else {
                        // Ø§Ú¯Ø± Ø¢ÙˆØ§ØªØ§Ø± Ù†ÛŒØ³ØªØŒ Ø§Ø² Ø­Ø±Ù Ø§ÙˆÙ„ Ø§Ø³Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                        userAvatar.textContent = displayName.charAt(0).toUpperCase();
                        userAvatar.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                        console.log('No avatar URL, using initials');
                    }
                    
                    // Ù†Ù…Ø§ÛŒØ´ Ú©Ù¾Ø³ÙˆÙ„
                    userPill.style.display = 'flex';
                    
                    // Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
                    localStorage.setItem('tg_user_id', user.id);
                    localStorage.setItem('tg_user_name', displayName);
                    localStorage.setItem('tg_username', user.username || '');
                    localStorage.setItem('tg_user_photo', user.photo_url || '');
                    localStorage.setItem('tg_is_premium', user.is_premium || false);
                    
                    console.log('Telegram user profile set successfully');
                    
                } else if (attempts < maxAttempts) {
                    // Ù‡Ù†ÙˆØ² Ø¯Ø§Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù†ÛŒØ§Ù…Ø¯Ù‡ØŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                    console.log('User data not available yet, retrying... (attempt ' + attempts + '/' + maxAttempts + ')');
                    setTimeout(tryLoadUser, 500);
                } else {
                    // Ø¨Ø¹Ø¯ Ø§Ø² Ø­Ø¯Ø§Ú©Ø«Ø± ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ØŒ Ú©Ù¾Ø³ÙˆÙ„ Ø±Ø§ Ù…Ø®ÙÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                    console.log('Failed to load user data after ' + maxAttempts + ' attempts, hiding user pill');
                    userPill.style.display = 'none';
                }
            }
            
            // Ø´Ø±ÙˆØ¹ ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø±
            tryLoadUser();
        }

        // ==============================
        // INITIALIZATION & CORE FUNCTIONS
        // ==============================

        // Function to update the coin display
        function updateCoinDisplay() {
            const coins = parseInt(localStorage.getItem('coins')) || 0;
            const coinDisplay = document.getElementById('coinCount');
            if (coinDisplay) coinDisplay.textContent = coins.toLocaleString('en-US');
        }

        // Update when coin value changes from other tabs
        window.addEventListener('storage', ({ key }) => {
            if (key === 'coins') updateCoinDisplay();
        });

        // Initial load
        updateCoinDisplay();

        // Task completion with fake loading
        function completeTask(taskId, reward, dummyUrl, taskStorageKey) {
            const today = new Date().toISOString().split('T')[0];

            if (localStorage.getItem(taskStorageKey) === today) {
                return showNotification('â³ This task has already been completed today.', 'warning');
            }

            // Show loading on button
            const button = event.target;
            button.classList.add('loading');

            // Wait for 1s, then give reward
            setTimeout(() => {
                button.classList.remove('loading');

                // Save as done
                localStorage.setItem(taskStorageKey, today);

                // Add coins
                let coins = parseInt(localStorage.getItem('coins')) || 0;
                coins += reward;
                localStorage.setItem('coins', coins);
                updateCoinDisplay();
                updatePriceRangeDisplay();

                // Notify
                showNotification(`ğŸ‰ Congratulations! You earned ${reward.toLocaleString('en-US')} coins.`);
            }, 1000);
        }

        // ==============================
        // INVITE SYSTEM - Ú©Ø§Ù…Ù„Ø§Ù‹ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡
        // ==============================

        const TASK_CONFIG = {
            thresholds: {
                invite3: 3,
                invite5: 5,
                invite10: 10,
                invite20: 20,
            },
            rewards: {
                invite3: 5000,
                invite5: 10000,
                invite10: 30000,
                invite20: 100000,
            },
        };

        // Complete Invite Task
        async function completeInviteTask(taskName) {
            const userId = localStorage.getItem('userId');
            if (!userId) {
                showNotification('âš ï¸ Please log in first', 'warning');
                return;
            }

            if (localStorage.getItem(taskName) === 'true') {
                showNotification('âš ï¸ You have already claimed this reward', 'warning');
                return;
            }

            const required = TASK_CONFIG.thresholds[taskName];
            const reward = TASK_CONFIG.rewards[taskName];
            const invitedFriends = parseInt(localStorage.getItem('invitedFriends')) || 0;

            if (invitedFriends < required) {
                const remaining = required - invitedFriends;
                showNotification(`âš ï¸ Invite ${remaining} more friend${remaining === 1 ? '' : 's'} to claim this reward`, 'warning');
                return;
            }

            // Show loading on button
            const button = event.target;
            button.classList.add('loading');

            setTimeout(() => {
                button.classList.remove('loading');
                
                // Grant reward
                let coins = parseInt(localStorage.getItem('coins')) || 0;
                coins += reward;
                localStorage.setItem('coins', coins);
                localStorage.setItem(taskName, 'true');

                updateCoinDisplay();
                updatePriceRangeDisplay();
                updateInviteTaskStatus();
                showNotification(`ğŸ‰ Congratulations! You received ${reward.toLocaleString()} coins`);
            }, 1000);
        }

        // Disable Buttons Only If Reward Claimed
        function updateInviteTaskStatus() {
            ['invite3', 'invite5', 'invite10', 'invite20'].forEach(key => {
                const btnId = `claim${key.charAt(0).toUpperCase() + key.slice(1)}`;
                const btn = document.getElementById(btnId);
                if (btn) {
                    const completed = localStorage.getItem(key) === 'true';
                    btn.disabled = completed;
                    if (completed) {
                        btn.textContent = 'Claimed';
                        btn.style.opacity = '0.7';
                    }
                }
            });

            // Update invited count display
            const invitedCount = parseInt(localStorage.getItem('invitedFriends')) || 0;
            document.getElementById('invitedCount').textContent = invitedCount;
        }

        // ==============================
        // PAYMENT SYSTEM - Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ø¨Ø§ polling Ùˆ Ù…ØªÙ† Processing...
        // ==============================

        async function handlePayment(coins, usdPrice, btn) {
            const originalText = btn.textContent;
            btn.disabled = true;
            
            // ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯ (USDT) Ù…ØªÙ† Ø±Ø§ Ø¨Ù‡ Processing... ØªØºÛŒÛŒØ± Ø¨Ø¯Ù‡
            if (btn.classList.contains('buy-btn')) {
                btn.textContent = 'Processing...';
                btn.classList.add('loading');
            } else {
                btn.classList.add('loading');
            }

            function resetBtn() {
                btn.disabled = false;
                btn.classList.remove('loading');
                btn.textContent = originalText;
            }

            try {
                let userId = localStorage.getItem('userId') || 'test-user';
                const paymentUrl = `payment.html?coins=${encodeURIComponent(coins)}&usdPrice=${encodeURIComponent(usdPrice)}&userId=${encodeURIComponent(userId)}`;

                // Store payment data
                localStorage.setItem("purchase_tokens", coins);
                localStorage.setItem("purchase_usdt", usdPrice);
                localStorage.setItem("current_payment_userId", userId);
                
                // Wait 1 second before redirecting
                setTimeout(() => {
                    window.location.href = paymentUrl;
                }, 1000);

                // Start polling for payment status every 1 second
                const pollInterval = setInterval(async () => {
                    const status = localStorage.getItem('payment_status');
                    const paymentUserId = localStorage.getItem('current_payment_userId');
                    
                    // ÙÙ‚Ø· Ø§Ú¯Ø± ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø§Ø³Øª
                    if (status && paymentUserId === userId) {
                        if (status === 'success') {
                            clearInterval(pollInterval);
                            
                            // Ø§ÙØ²Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙÙ‚
                            const successfulPayments = parseInt(localStorage.getItem('successfulPayments')) || 0;
                            localStorage.setItem('successfulPayments', successfulPayments + 1);
                            
                            // Ø§ÙØ²ÙˆØ¯Ù† Ø³Ú©Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø±
                            let currentCoins = parseInt(localStorage.getItem('coins')) || 0;
                            currentCoins += coins;
                            localStorage.setItem('coins', currentCoins);
                            
                            // Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª
                            localStorage.removeItem('payment_status');
                            localStorage.removeItem('payment_error');
                            localStorage.removeItem('current_payment_userId');
                            localStorage.removeItem('purchase_tokens');
                            localStorage.removeItem('purchase_usdt');
                            
                            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´
                            updateCoinDisplay();
                            updatePriceRangeDisplay();
                            
                            // Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ÛŒ
                            await sendUserDataToServer('payment_success', {
                                coins: currentCoins,
                                purchasedCoins: coins,
                                usdPrice: usdPrice
                            });
                            
                            showNotification('âœ… Payment successful! Tokens added to your balance.');
                            resetBtn();
                            
                        } else if (status === 'failed') {
                            clearInterval(pollInterval);
                            
                            // Ø§ÙØ²Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚
                            const failedPayments = parseInt(localStorage.getItem('failedPayments')) || 0;
                            localStorage.setItem('failedPayments', failedPayments + 1);
                            
                            const errorMsg = localStorage.getItem('payment_error') || 'Unknown error';
                            
                            // Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª
                            localStorage.removeItem('payment_status');
                            localStorage.removeItem('payment_error');
                            localStorage.removeItem('current_payment_userId');
                            
                            // Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ÛŒ
                            await sendUserDataToServer('payment_failed', {
                                error: errorMsg,
                                usdPrice: usdPrice
                            });
                            
                            showNotification(`âŒ Payment failed: ${errorMsg}`, 'error');
                            resetBtn();
                        }
                    }
                }, 1000);

                // ØªÙˆÙ‚Ù polling Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø¯Ù‚ÛŒÙ‚Ù‡ (Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² memory leak)
                setTimeout(() => {
                    clearInterval(pollInterval);
                }, 300000);

            } catch (err) {
                console.error('Unexpected error:', err);
                showNotification('âŒ Unexpected error during payment process.', 'error');
                resetBtn();
            }
        }

        // ==============================
        // NOTIFICATION SYSTEM
        // ==============================

        (function () {
            let notifTimer;

            function setupNotification() {
                window.showNotification = function (message, type = 'success') {
                    let box = document.querySelector('.notif-box');

                    if (!box) {
                        box = document.createElement('div');
                        box.className = 'notif-box';
                        document.body.appendChild(box);
                    }

                    box.textContent = message;
                    box.className = `notif-box ${type} show`;

                    clearTimeout(notifTimer);
                    notifTimer = setTimeout(() => {
                        box.classList.remove('show');
                        box.classList.add('hide');
                        setTimeout(() => {
                            box.remove();
                        }, 500);
                    }, 3000);
                };
            }

            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', setupNotification);
            } else {
                setupNotification();
            }
        })();

        // ==============================
        // PRICE RANGE DISPLAY
        // ==============================

        function updatePriceRangeDisplay() {
            const coins = parseInt(localStorage.getItem('coins')) || 0;
            const minUsd = (coins * 0.0003).toFixed(2);
            const maxUsd = (coins * 0.0007).toFixed(2);

            const minEl = document.getElementById('minUsd');
            const maxEl = document.getElementById('maxUsd');

            if (minEl) minEl.textContent = `$${minUsd}`;
            if (maxEl) maxEl.textContent = `$${maxUsd}`;
        }

        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        updatePriceRangeDisplay();

        // Ø§Ú¯Ø± Ù…Ù‚Ø¯Ø§Ø± Ø³Ú©Ù‡â€ŒÙ‡Ø§ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯ØŒ Ø¨Ø§Ø²Ù‡ Ø¯Ù„Ø§Ø±ÛŒ Ù‡Ù… Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´ÙˆØ¯
        window.addEventListener('storage', ({ key }) => {
            if (key === 'coins') updatePriceRangeDisplay();
        });

        // ==============================
        // SERVER SYNC SYSTEM - Ø¬Ø¯ÛŒØ¯
        // ==============================

        // Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ÛŒ
        async function sendUserDataToServer(eventType = 'weekly', additionalData = {}) {
            try {
                const userId = localStorage.getItem('userId');
                const authToken = localStorage.getItem('authToken');
                
                if (!userId) {
                    console.warn('Cannot send data: No userId found');
                    return false;
                }

                const userData = {
                    type: eventType,
                    userId: userId,
                    timestamp: new Date().toISOString(),
                    coins: parseInt(localStorage.getItem('coins')) || 0,
                    invitedFriends: parseInt(localStorage.getItem('invitedFriends')) || 0,
                    successfulPayments: parseInt(localStorage.getItem('successfulPayments')) || 0,
                    failedPayments: parseInt(localStorage.getItem('failedPayments')) || 0,
                    ...additionalData
                };

                const response = await fetch('https://vercel-app-108-6bhs.vercel.app/data', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken || ''}`
                    },
                    body: JSON.stringify(userData)
                });

                if (response.ok) {
                    console.log(`âœ… Data sent to server (${eventType})`);
                    // Ø°Ø®ÛŒØ±Ù‡ Ø²Ù…Ø§Ù† Ø¢Ø®Ø±ÛŒÙ† Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙÙ‚
                    if (eventType === 'weekly') {
                        localStorage.setItem('lastWeeklySync', Date.now());
                    }
                    return true;
                } else {
                    console.error(`âŒ Failed to send data to server (${eventType})`);
                    return false;
                }
            } catch (error) {
                console.error(`âŒ Error sending data to server (${eventType}):`, error);
                return false;
            }
        }

        // Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ù‡ÙØªÚ¯ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
        async function checkAndSendWeeklyData() {
            const lastSync = localStorage.getItem('lastWeeklySync');
            const oneWeek = 7 * 24 * 60 * 60 * 1000; // ÛŒÚ© Ù‡ÙØªÙ‡ Ø¨Ù‡ Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡
            const now = Date.now();
            
            // Ø§Ú¯Ø± Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø§Ø± Ø§Ø³Øª ÛŒØ§ Ø¨ÛŒØ´ Ø§Ø² ÛŒÚ© Ù‡ÙØªÙ‡ Ú¯Ø°Ø´ØªÙ‡
            if (!lastSync || (now - parseInt(lastSync)) > oneWeek) {
                console.log('Sending weekly user data to server...');
                await sendUserDataToServer('weekly');
            } else {
                const daysLeft = Math.ceil((oneWeek - (now - parseInt(lastSync))) / (24 * 60 * 60 * 1000));
                console.log(`Next weekly sync in ${daysLeft} days`);
            }
        }

        // ==============================
        // WEB APP FALLBACK & INIT
        // ==============================

        // Fallback Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø¨Ø¯ÙˆÙ† ÙˆØ¨â€ŒØ§Ù¾
        function applyWebAppFallback() {
            const isTelegramWebApp = isTelegramEnvironment();
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ù‚Ø¨Ù„Ø§Ù‹ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª
            const hasShownError = localStorage.getItem('hasShownWebAppError');
            
            if (!isTelegramWebApp) {
                console.warn('âš ï¸ WebApp context not detected. Applying fallback...');
                
                // ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ Ù†Ø´Ø§Ù† Ø¨Ø¯Ù‡
                if (!hasShownError) {
                    setTimeout(() => {
                        showNotification('âš ï¸ Running in fallback mode. Some features may be limited.', 'warning');
                        localStorage.setItem('hasShownWebAppError', 'true');
                    }, 2000);
                }
                
                if (!localStorage.getItem('userId')) {
                    const fakeUserId = 'user_' + Math.floor(Math.random() * 1000000) + '_' + Date.now();
                    localStorage.setItem('userId', fakeUserId);
                    localStorage.setItem('authToken', 'test-token-' + fakeUserId);
                }
            } else {
                // Ø§Ú¯Ø± Ø¯Ø± Ù…Ø­ÛŒØ· ØªÙ„Ú¯Ø±Ø§Ù… Ù‡Ø³ØªÛŒÙ…ØŒ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†
                if (hasShownError) {
                    localStorage.removeItem('hasShownWebAppError');
                }
            }
        }

        // Invite Tracking Helpers
        function incrementInviteCount(inviterId) {
            const selfId = localStorage.getItem('userId');
            if (inviterId === selfId) return;
            
            let invited = parseInt(localStorage.getItem('invitedFriends')) || 0;
            invited++;
            localStorage.setItem('invitedFriends', invited);
            updateInviteTaskStatus();
            
            // Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ Ø³Ø±ÙˆØ±
            sendUserDataToServer('invite_added', { invitedBy: inviterId });
        }

        function registerReferral() {
            try {
                // ØªÙ„Ú¯Ø±Ø§Ù… WebApp
                const referrerId = Telegram?.WebApp?.initDataUnsafe?.start_param;
                
                if (referrerId && referrerId !== 'undefined' && referrerId !== 'null') {
                    // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª
                    if (!localStorage.getItem('invitedBy')) {
                        localStorage.setItem('invitedBy', referrerId);
                        incrementInviteCount(referrerId);
                        console.log(`âœ… Registered referral from: ${referrerId}`);
                    }
                }
                
                // Ù‡Ù…Ú†Ù†ÛŒÙ† Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ± URL (Ø¨Ø±Ø§ÛŒ Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ ØºÛŒØ±ØªÙ„Ú¯Ø±Ø§Ù…)
                const urlParams = new URLSearchParams(window.location.search);
                const refFromUrl = urlParams.get('ref') || urlParams.get('start');
                
                if (refFromUrl && !localStorage.getItem('invitedBy')) {
                    localStorage.setItem('invitedBy', refFromUrl);
                    incrementInviteCount(refFromUrl);
                    console.log(`âœ… Registered referral from URL: ${refFromUrl}`);
                }
            } catch (e) {
                console.warn('Referral registration skipped:', e);
            }
        }

        function initLocalStorageDefaults() {
            const defaults = {
                'coins': '0',
                'invitedFriends': '0',
                'successfulPayments': '0',
                'failedPayments': '0',
                'lastWeeklySync': '0'
            };
            
            Object.entries(defaults).forEach(([key, value]) => {
                if (localStorage.getItem(key) == null) {
                    localStorage.setItem(key, value);
                }
            });
            
            updateCoinDisplay();
            updateInviteTaskStatus();
        }

        // ==============================
        // GESTURE & SELECTION BLOCKING SYSTEM
        // ==============================

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø±Ø§Ø³Øªâ€ŒÚ©Ù„ÛŒÚ© Ø¯Ø³Ú©ØªØ§Ù¾
        document.addEventListener('contextmenu', e => e.preventDefault(), true);

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² copy / cut / paste Ø¨Ù‡ Ø¬Ø² Ø¨Ø±Ø§ÛŒ textarea Ù…ÙˆÙ‚Øª Ú©Ù¾ÛŒ
        document.addEventListener('copy', e => {
            if (!e.target.classList.contains('temp-copy-area')) {
                e.preventDefault();
            }
        }, true);

        document.addEventListener('cut', e => {
            if (!e.target.classList.contains('temp-copy-area')) {
                e.preventDefault();
            }
        }, true);

        document.addEventListener('paste', e => {
            if (!e.target.classList.contains('temp-copy-area')) {
                e.preventDefault();
            }
        }, true);

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ú©Ù¾ÛŒ Ù…Ø«Ù„ Ctrl+C / Cmd+C
        document.addEventListener('keydown', e => {
            if (e.ctrlKey || e.metaKey) {
                // Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø§Ø¯Ù† Ø¨Ù‡ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ ØªØ±Ú©ÛŒØ¨ÛŒ Ø¨Ø±Ø§ÛŒ textarea Ù…ÙˆÙ‚Øª
                if (!e.target.classList.contains('temp-copy-area')) {
                    e.preventDefault();
                }
            }
        }, true);

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² long-press Ù…Ù†ÙˆÙ‡Ø§ÛŒ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯ Ùˆ iOS
        let touchTimer;
        document.addEventListener('touchstart', e => {
            clearTimeout(touchTimer);
            // Ø§Ú¯Ø± Ø¨ÛŒØ´ Ø§Ø² 350ms Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø´ØªÙ‡ Ø´ÙˆØ¯ â†’ Ø¨Ù„Ø§Ú©
            touchTimer = setTimeout(() => {
                e.preventDefault();
            }, 350);
        }, { passive: false });

        document.addEventListener('touchend', () => {
            clearTimeout(touchTimer);
        });

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² gesture Ù‡Ø§ÛŒÛŒ Ù…Ø«Ù„ pinch-zoom
        document.addEventListener('gesturestart', e => e.preventDefault());
        document.addEventListener('gesturechange', e => e.preventDefault());
        document.addEventListener('gestureend', e => e.preventDefault());

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù…Ù†ÙˆÛŒ native Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ / ÙØ¶Ø§ÛŒ Ø®Ø§Ù„ÛŒ (Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯ Ùˆ iOS)
        document.addEventListener('touchstart', e => {
            if (e.target === document.body || e.target === document.documentElement) {
                e.preventDefault();
            }
        }, { passive: false });

        // Ø¨Ù„Ø§Ú© long-press Ù…Ø®ØµÙˆØµ WebApp ØªÙ„Ú¯Ø±Ø§Ù…
        const blocker = document.getElementById('gesture-blocker');
        blocker.style.pointerEvents = 'none'; 
        // Ù„Ø§ÛŒÙ‡ ÙØ¹Ø§Ù„ Ø§Ø³Øª ÙˆÙ„ÛŒ Ù‡ÛŒÚ† ØªØ¯Ø§Ø®Ù„ÛŒ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ùˆ ØªØ§Ú† Ø§Ù¾ Ù†Ø¯Ø§Ø±Ø¯

        // ==============================
        // EVENT LISTENERS & SETUP
        // ==============================

        document.addEventListener('DOMContentLoaded', function(){
            // Ø§ÛŒØ¬Ø§Ø¯ Ø§Ù„Ù…Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…ØªØ­Ø±Ú©
            const container = document.getElementById("diamonds");
            const count = 25;

            for (let i = 0; i < count; i++) {
                const d = document.createElement("div");
                d.classList.add("diamond");

                const size = Math.random() * 10 + 6;
                d.style.width = `${size}px`;
                d.style.height = `${size}px`;

                d.style.left = `${Math.random() * 100}%`;
                d.style.top = `${Math.random() * 100}%`;

                d.style.animationDuration = `${10 + Math.random() * 10}s`;
                d.style.animationDelay = `${Math.random() * 8}s`;

                container.appendChild(d);
            }

            setTimeout(function(){
                document.getElementById('loadingScreen').classList.add('hidden');
                initValues();
                setupEventListeners();
                handleNavOverlayOnLoad();
                setupScrollObserver();
            }, 900);
        });

        function initValues(){
            // Setup user profile - ÙÙ‚Ø· Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…
            setupUserProfile();
            
            updateCoinDisplay();
            updatePriceRangeDisplay();
            updateInviteTaskStatus();
            applyWebAppFallback();
            initLocalStorageDefaults();
            registerReferral();
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù‡ÙØªÚ¯ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
            setTimeout(() => {
                checkAndSendWeeklyData();
            }, 3000);
        }

        function setupEventListeners(){
            // Invite button - Ú©Ø§Ù…Ù„Ø§Ù‹ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡
            document.getElementById('inviteButton').addEventListener('click', function(){
                const button = this;
                button.classList.add('loading');
                
                setTimeout(() => {
                    const userId = localStorage.getItem('userId');
                    if (!userId) {
                        showNotification('âš ï¸ Please log in first', 'warning');
                        button.classList.remove('loading');
                        return;
                    }

                    // Ø³Ø§Ø®Øª Ù„ÛŒÙ†Ú© Ø¯Ø¹ÙˆØª Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯
                    const inviteLink = `https://t.me/Daimonium_bot?start=${encodeURIComponent(userId)}`;
                    
                    // Ù…ØªÙ† Ø¯Ø¹ÙˆØª
                    const shareText = `ğŸ‘‹ Hey, my friend! 

ğŸ’ Welcome to Daimonium â€” the first Telegram Mini-App offering early access to token sales.

ğŸš€ Get in before tokens hit the market â€” while they're still under the radar.

ğŸ›¡ï¸ No risk. No spam. No empty hype.  
 Just pure, real opportunity â€” made simple.

ğŸ•“ Join now and be ahead of the curve.`;

                    // Ú©Ù¾ÛŒ Ù„ÛŒÙ†Ú© Ø¨Ù‡ Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯
                    const textArea = document.createElement('textarea');
                    textArea.value = inviteLink;
                    textArea.className = 'temp-copy-area'; // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ù„Ø§Ø³ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØ«Ù†Ø§
                    document.body.appendChild(textArea);
                    textArea.select();
                    
                    try {
                        document.execCommand('copy');
                        showNotification('âœ… Invite link copied to clipboard!');
                    } catch(e) {
                        showNotification('âŒ Failed to copy link. Please try again.', 'error');
                        document.body.removeChild(textArea);
                        button.classList.remove('loading');
                        return;
                    }
                    document.body.removeChild(textArea);
                    
                    // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
                    const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(inviteLink)}&text=${encodeURIComponent(shareText)}`;
                    window.open(shareUrl, '_blank');
                    
                    button.classList.remove('loading');
                }, 1000);
            });

            // Wallet connect
            document.getElementById('connectBtn').addEventListener('click', function(e){
                e.preventDefault();
                const button = this;
                button.classList.add('loading');
                
                setTimeout(() => {
                    button.classList.remove('loading');
                    showNotification("ğŸ”’ Wallet connection will be available starting 2026/03/03, coinciding with the listing of Daimonium tokens on exchanges.\nWe kindly ask for your patience until then ğŸ™", 'warning');
                }, 1000);
            });

            // Modal info button
            document.getElementById('infoButton').addEventListener('click', function(){
                document.getElementById('infoModal').classList.add('active');
                document.body.style.overflow = 'hidden';
            });

            // Modal close button
            document.getElementById('closeModal').addEventListener('click', function(){
                document.getElementById('infoModal').classList.remove('active');
                document.body.style.overflow = 'auto';
            });

            // Ø¨Ø³ØªÙ† modal Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ overlay
            document.getElementById('infoModal').addEventListener('click', function(e){
                if(e.target === this) {
                    this.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });

            // nav active state
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item=>{
                item.addEventListener('click', function(){
                    const targetId = this.getAttribute('data-target');
                    scrollToSection(targetId);
                    
                    navItems.forEach(i=>{
                        i.classList.remove('active');
                        i.style.opacity = '0.4';
                    });
                    this.classList.add('active');
                    this.style.opacity = '1';
                });
            });

            // bottom nav overlay effect on scroll
            window.addEventListener('scroll', throttle(handleNavOverlayOnScroll, 120), {passive:true});
            window.addEventListener('resize', throttle(handleNavOverlayOnScroll, 200));
        }

        // ==============================
        // SCROLL OBSERVER & NAVIGATION
        // ==============================

        // Intersection Observer Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© active nav
        function setupScrollObserver() {
            const sections = [
                {id: 'headerSection', navIndex: 0},
                {id: 'tasksSection', navIndex: 0},
                {id: 'inviteSection', navIndex: 1},
                {id: 'purchaseSection', navIndex: 2},
                {id: 'walletSection', navIndex: 3},
                {id: 'announcementsSection', navIndex: 3}
            ];
            
            const navItems = document.querySelectorAll('.nav-item');
            let currentActiveIndex = 0;
            let observerTimeout = null;
            
            const observer = new IntersectionObserver((entries) => {
                if (observerTimeout) clearTimeout(observerTimeout);
                
                observerTimeout = setTimeout(() => {
                    let activeIndex = currentActiveIndex;
                    let maxVisibleRatio = 0;
                    
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const visibleRatio = entry.intersectionRatio;
                            if (visibleRatio > maxVisibleRatio) {
                                maxVisibleRatio = visibleRatio;
                                const section = sections.find(s => s.id === entry.target.id);
                                if (section) {
                                    activeIndex = section.navIndex;
                                }
                            }
                        }
                    });
                    
                    if (activeIndex !== currentActiveIndex && maxVisibleRatio > 0.3) {
                        currentActiveIndex = activeIndex;
                        navItems.forEach((item, index) => {
                            if (index === activeIndex) {
                                item.classList.add('active');
                                item.style.opacity = '1';
                            } else {
                                item.classList.remove('active');
                                item.style.opacity = '0.6';
                            }
                        });
                    }
                }, 100);
            }, { 
                threshold: [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],
                rootMargin: '-30% 0px -30% 0px'
            });
            
            sections.forEach(section => {
                const element = document.getElementById(section.id);
                if (element) observer.observe(element);
            });
        }

        /* Scroll to section - Ø¨Ù‡Ø¨ÙˆØ¯ ÛŒØ§ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ ÙˆØ³Ø· ØµÙØ­Ù‡ */
        function scrollToSection(id){
            const el = document.getElementById(id);
            if(el) {
                const elementRect = el.getBoundingClientRect();
                const absoluteElementTop = elementRect.top + window.pageYOffset;
                const middle = absoluteElementTop - (window.innerHeight / 2) + (elementRect.height / 2);
                window.scrollTo({
                    top: middle,
                    behavior: 'smooth'
                });
            }
        }

        /* -------------------------
           Bottom nav overlay behavior
           ------------------------- */
        const bottomNav = document.getElementById('bottomNav');

        function handleNavOverlayOnLoad(){
            handleNavOverlayOnScroll();
        }

        function handleNavOverlayOnScroll(){
            const trigger = window.scrollY || document.documentElement.scrollTop;
            if(trigger > 50){
                bottomNav.classList.add('overlay');
            } else {
                bottomNav.classList.remove('overlay');
            }
        }

        // throttle helper
        function throttle(fn, wait){
            let time = Date.now();
            return function(){
                if((time + wait - Date.now()) < 0){
                    fn();
                    time = Date.now();
                }
            };
        }
    </script>
</body>
</html>